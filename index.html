<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chic & Thread - Business Manager</title>
   <link rel="icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3crect width='100' height='100' rx='15' fill='%23EC4899'/%3e%3cpath fill='white' d='M20 30h60l-10 50H30zM50 20c-8 0-15 7-15 15v5h30v-5c0-8-7-15-15-15zM30 40c0 5 5 10 10 10h20c5 0 10-5 10-10'/%3e%3c/svg%3e">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

    <style>
        :root {
            --background-body: #F8F9FA;
            --surface-primary: #FFFFFF;
            --surface-secondary: #F1F3F5;
            
            --text-primary: #212529;
            --text-secondary: #6C757D;
            --text-placeholder: #ADB5BD;
            --text-on-accent: #FFFFFF;

            --accent-primary: #D63384; /* Pink */
            --accent-secondary: #0D6EFD; /* Blue */
            --accent-tertiary: #198754; /* Green */

            --success-green: #198754;
            --danger-red: #DC3545;
            --warning-yellow: #FFC107;
            --info-blue: #0DCAF0;

            --border-primary: #DEE2E6;
            --border-focus: var(--accent-primary);

            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --border-radius-lg: 16px;

            --shadow-subtle: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow-medium: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-strong: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html { height: 100%; scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
            background-color: var(--background-body);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        #login-screen {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 100vh; width: 100%; text-align: center; padding: 2rem;
            background: linear-gradient(135deg, #fdf4f8 0%, #eef5ff 100%);
        }
        .login-box {
            background: var(--surface-primary); color: var(--text-primary);
            padding: 2.5rem 3rem; border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong); max-width: 480px; width: 100%;
        }
        .login-box .store-logo { font-size: 2.5rem; font-weight: 700; color: var(--accent-primary); margin-bottom: 0.5rem; }
        .login-box h1 { margin-bottom: 0.5rem; font-size: 1.8rem; font-weight: 600; }
        .login-box p { color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 0.95rem; }
        #signin-btn { background-color: #4285F4; color: white; border: none; padding: 14px 28px; font-size: 1rem; font-weight: 500; border-radius: var(--border-radius-md); cursor: pointer; display: inline-flex; align-items: center; gap: 1rem; transition: background-color 0.3s, box-shadow 0.3s; box-shadow: var(--shadow-subtle); }
        #signin-btn:hover:not([disabled]) { background-color: #357ae8; box-shadow: var(--shadow-medium); }
        #signin-btn[disabled] { background-color: #ADB5BD; color: #f8f9fa; cursor: not-allowed; }
        #signin-btn svg { width: 24px; height: 24px; background: white; border-radius: 50%; padding: 2px; }
        #auth-status { margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-secondary); }

        #app-container { display: none; padding: 25px; }
        #app-container.visible { display: block; }

        header {
            background-color: var(--surface-primary); color: var(--text-primary);
            padding: 15px 25px; border-radius: var(--border-radius-lg);
            margin-bottom: 25px; box-shadow: var(--shadow-medium);
            display: flex; justify-content: space-between; align-items: center;
        }
        header .header-title-group h1 { margin: 0; font-weight: 700; font-size: 1.6rem; color: var(--accent-primary); }
        .user-profile { display: flex; align-items: center; gap: 15px; }
        .user-profile img { width: 40px; height: 40px; border-radius: 50%; }
        .user-profile span { font-weight: 500; font-size: 0.95rem; }
        #signout-btn { font-size: 0.85rem; color: var(--danger-red); cursor: pointer; background: transparent; border: 1px solid var(--danger-red); border-radius: var(--border-radius-md); padding: 7px 12px; font-weight: 500; transition: background-color 0.2s, color 0.2s; }
        #signout-btn:hover { background-color: var(--danger-red); color: var(--text-on-accent); }

        .tab-nav {
            display: flex; flex-wrap: wrap; justify-content: flex-start; margin-bottom: 30px;
            background-color: var(--surface-primary); padding: 5px; border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-subtle);
        }
        .tab-button {
            padding: 10px 20px; cursor: pointer; border: none; background-color: transparent;
            font-size: 0.95rem; font-weight: 500; color: var(--text-secondary);
            border-radius: var(--border-radius-md); transition: color 0.3s ease, background-color 0.2s ease;
            margin: 0 3px;
        }
        .tab-button:hover { color: var(--text-primary); background-color: var(--surface-secondary); }
        .tab-button.active { color: var(--text-on-accent); background-color: var(--accent-primary); font-weight: 600; box-shadow: var(--shadow-medium); }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeInContent 0.5s ease-in-out; }
        @keyframes fadeInContent { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        main { max-width: 1400px; margin: 0 auto; }
        
        .card {
            background-color: var(--surface-primary); color: var(--text-primary);
            border-radius: var(--border-radius-lg); padding: 25px 30px;
            box-shadow: var(--shadow-medium); margin-bottom: 30px;
        }
        .card-header { display:flex; justify-content: space-between; align-items:center; margin-bottom: 25px; }
        .card h2 {
            font-weight: 600; font-size: 1.4rem; margin-top: 0; margin-bottom: 0;
            color: var(--text-primary);
        }
        
        input, select {
            width: 100%; padding: 12px 15px; border: 1px solid var(--border-primary);
            border-radius: var(--border-radius-md); font-size: 0.95rem; 
            font-family: 'Poppins', sans-serif; background-color: var(--surface-secondary);
            color: var(--text-primary);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        input:focus, select:focus {
            border-color: var(--border-focus); box-shadow: 0 0 0 3px rgba(214, 51, 132, 0.15); outline: none;
        }
        input::placeholder { color: var(--text-placeholder); opacity: 1; }
        label { display: block; font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 8px; font-weight: 500; }
        
        .btn {
            padding: 12px 24px; border-radius: var(--border-radius-md); border: none; font-size: 0.95rem;
            font-weight: 500; cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-subtle);
        }
        .btn:hover:not([disabled]) { box-shadow: var(--shadow-medium); transform: translateY(-2px); }
        .btn:active:not([disabled]) { transform: translateY(0px); box-shadow: var(--shadow-subtle); }
        .btn-primary { background-color: var(--accent-primary); color: var(--text-on-accent); }
        .btn-primary:hover:not([disabled]) { background-color: #c22572; }
        .btn-secondary { background-color: var(--surface-secondary); color: var(--text-primary); border: 1px solid var(--border-primary); }
        .btn-secondary:hover:not([disabled]) { background-color: #e2e6ea; }
        .btn-success { background-color: var(--success-green); color: var(--text-on-accent); }
        .btn-danger { background-color: var(--danger-red); color: var(--text-on-accent); }

        .table-container { overflow-x: auto; border: 1px solid var(--border-primary); border-radius: var(--border-radius-md); }
        .styled-table { width: 100%; border-collapse: collapse; }
        .styled-table th, .styled-table td { border-bottom: 1px solid var(--border-primary); padding: 16px; text-align: left; font-size: 0.9rem; vertical-align: middle; color: var(--text-secondary); }
        .styled-table th { background-color: var(--surface-secondary); color: var(--text-primary); font-weight: 600; text-transform: capitalize; }
        .styled-table tr:last-child td { border-bottom: none; }
        .styled-table tr:hover td { background-color: #fcf4f8; }

        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }
        .stat-card { background-color: var(--surface-primary); padding: 20px; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-medium); }
        .stat-card h3 { margin: 0 0 8px; color: var(--text-secondary); font-size: 0.9rem; font-weight: 500; text-transform: uppercase; }
        .stat-card .value { font-size: 2.1rem; margin: 0; color: var(--text-primary); font-weight: 700; line-height: 1.2; }
        
        /* New Sales Entry UI */
        #sales-entry-layout { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; }
        #sales-entry-form .item-search-bar { margin-bottom: 20px; }
        #sales-entry-items-table th, #sales-entry-items-table td { padding: 12px; }
        #sales-entry-summary { background: var(--surface-secondary); padding: 25px; border-radius: var(--border-radius-lg); }
        #sales-entry-summary .summary-row { display: flex; justify-content: space-between; font-size: 1rem; margin-bottom: 15px; }
        #sales-entry-summary .summary-row span { color: var(--text-secondary); }
        #sales-entry-summary .summary-row strong { color: var(--text-primary); font-weight: 600; }
        #sales-entry-summary .total-row { font-size: 1.25rem; font-weight: 700; border-top: 1px dashed var(--border-primary); padding-top: 15px; }
        #sales-entry-summary .profit-row { background-color: #eaf6ed; color: var(--success-green); padding: 10px; border-radius: var(--border-radius-md); font-weight: 600; }
        
        .payment-toggle { display: flex; gap: 10px; margin: 25px 0; }
        .payment-toggle button { flex: 1; padding: 12px; font-weight: 500; border: 1px solid var(--border-primary); background: var(--surface-primary); border-radius: var(--border-radius-md); }
        .payment-toggle button.active { background: var(--accent-tertiary); color: var(--text-on-accent); border-color: var(--accent-tertiary); }

        /* Transaction History UI */
        #transaction-history-header { display: flex; gap: 20px; margin-bottom: 25px; }
        #transaction-history-header .stat-card { flex: 1; }
        #transaction-history-filters { display: flex; flex-wrap: wrap; gap: 15px; align-items: center; margin-bottom: 25px; }
        #transaction-history-filters .search-bar { flex-grow: 1; }
        #transaction-breakdown-chart { max-height: 140px; }

        /* Profit & Performance UI */
        .profit-dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; margin-bottom: 25px; }
        .profit-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 25px; }
        #profit-by-category-chart-container { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        #profit-by-category-chart { max-height: 250px; }

        /* Sales Analytics UI */
        .analytics-dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; }
        .analytics-filters { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 25px; }
        .analytics-filters .filter-group { flex: 1; min-width: 150px; }

        /* Credit Tab UI */
        .credit-summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin-bottom: 25px; }
        #total-outstanding-credit .value { color: var(--warning-yellow); }
        #total-overdue-accounts .value { color: var(--danger-red); }
        .credit-filters { display: flex; gap: 15px; align-items: center; }
        .payment-status-filter button { padding: 8px 16px; font-weight: 500; border: 1px solid var(--border-primary); background: var(--surface-primary); border-radius: 20px; }
        .payment-status-filter button.active { background: var(--accent-primary); color: var(--text-on-accent); border-color: var(--accent-primary); }
        .status-paid { color: var(--success-green); font-weight: 600; }
        .status-due { color: var(--warning-yellow); font-weight: 600; }
        .status-overdue { color: var(--danger-red); font-weight: 600; }

        #toast { position: fixed; bottom: -120px; left: 50%; transform: translateX(-50%); padding: 14px 25px; border-radius: var(--border-radius-md); color: var(--text-on-accent); font-weight: 600; font-size: 0.95rem; box-shadow: var(--shadow-strong); transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); z-index: 9999; opacity: 0; }
        #toast.show { bottom: 25px; opacity: 1; }
        #toast.success { background-color: var(--success-green); }
        #toast.error { background-color: var(--danger-red); }
        #toast.info { background-color: var(--info-blue); }

        @media (max-width: 992px) {
            #sales-entry-layout, .profit-dashboard-grid { grid-template-columns: 1fr; }
            .analytics-dashboard-grid { grid-template-columns: 1fr; }
            header { flex-direction: column; gap: 15px; }
        }
        @media (max-width: 768px) {
            .tab-nav { justify-content: center; }
            .tab-button { font-size: 0.9rem; padding: 8px 12px; }
            .card { padding: 20px; }
            .card h2 { font-size: 1.2rem; }
            #transaction-history-header { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div id="login-screen">
        <div class="login-box">
            <div class="store-logo">Chic & Thread</div>
            <h1>Welcome Back!</h1>
            <p>Your business, simplified. Sign in to continue.</p>
            <button id="signin-btn" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/><path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"/><path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"/><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.012 35.841 44 30.138 44 24c0-1.341-.138-2.65-.389-3.917z"/></svg>
                Sign in with Google
            </button>
            <p id="auth-status" style="margin-top: 1.5rem; font-size: 0.9rem;">Initializing...</p>
        </div>
    </div>

    <div id="app-container">
        <header>
            <div class="header-title-group">
                <h1>Chic & Thread</h1>
            </div>
            <div id="user-profile-container" class="user-profile" style="display: none;">
                 <span id="user-name"></span>
                 <img id="user-pic" src="" alt="User profile picture">
                 <button id="signout-btn">Sign Out</button>
            </div>
        </header>

        <nav class="tab-nav">
            <button class="tab-button active" data-tab="sales_entry">Sales Entry</button>
            <button class="tab-button" data-tab="transactions">Transaction History</button>
            <button class="tab-button" data-tab="profit">Profit & Performance</button>
            <button class="tab-button" data-tab="analytics">Sales Analytics</button>
            <button class="tab-button" data-tab="credit">Credit Overview</button>
            <button class="tab-button" data-tab="settings">System Settings</button>
        </nav>

        <main>
            <!-- Sales Entry Tab -->
            <div id="sales_entry" class="tab-content active">
                <div class="card">
                    <div id="sales-entry-layout">
                        <div id="sales-entry-form">
                            <h2>New Sale</h2>
                            <div class="item-search-bar">
                                <label for="sales-item-search">Search Item</label>
                                <input type="text" id="sales-item-search" placeholder="Search by name or code..." list="inventory-datalist">
                                <datalist id="inventory-datalist"></datalist>
                            </div>
                            <div class="table-container">
                                <table class="styled-table" id="sales-entry-items-table">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th>Qty</th>
                                            <th>Price (per item)</th>
                                            <th>Total</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Items will be added here via JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div id="sales-entry-summary">
                            <h3>Summary</h3>
                            <div class="payment-toggle">
                                <button class="active" id="payment-cash-btn">Cash</button>
                                <button id="payment-credit-btn">Credit Card</button>
                            </div>
                            <div class="summary-row">
                                <span>Subtotal</span>
                                <strong id="summary-subtotal">₹0.00</strong>
                            </div>
                            <div class="summary-row">
                                <span>Discount (%)</span>
                                <input type="number" id="summary-discount" value="0" min="0" max="100" style="width: 70px; padding: 5px; text-align: right;">
                            </div>
                            <div class="summary-row total-row">
                                <span>Total</span>
                                <strong id="summary-total">₹0.00</strong>
                            </div>
                             <div class="summary-row profit-row">
                                <span>Profit Margin</span>
                                <strong id="summary-profit-margin">0.0%</strong>
                            </div>
                            <label for="summary-notes" style="margin-top: 20px;">Notes</label>
                            <textarea id="summary-notes" rows="3" style="width:100%; font-family: 'Poppins', sans-serif; padding:10px; border-radius:var(--border-radius-md); border: 1px solid var(--border-primary);"></textarea>
                            <button id="save-entry-btn" class="btn btn-primary" style="width: 100%; margin-top: 20px;">Save Entry</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Transaction History Tab -->
            <div id="transactions" class="tab-content">
                <div class="card">
                     <div id="transaction-history-header">
                        <div class="stat-card">
                            <h3>Total Transactions Today</h3>
                            <p class="value" id="th-total-transactions">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Total Revenue Today</h3>
                            <p class="value" id="th-total-revenue">₹0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Cash vs. Credit Sales</h3>
                            <div id="transaction-breakdown-chart-container">
                                <canvas id="transaction-breakdown-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div id="transaction-history-filters">
                        <div class="search-bar">
                            <input type="text" id="th-search" placeholder="Search transactions by item or ID...">
                        </div>
                        <div>
                             <select id="th-date-range">
                                <option value="today">Today</option>
                                <option value="last7days">Last 7 Days</option>
                                <option value="last30days" selected>Last 30 Days</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="payment-status-filter">
                           <button class="active" data-filter="all">All</button>
                           <button data-filter="Cash">Cash</button>
                           <button data-filter="Credit">Credit</button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="styled-table" id="transaction-history-table">
                           <thead><tr><th>Transaction ID</th><th>Date</th><th>Item(s) Sold</th><th>Payment Method</th><th>Amount (INR)</th></tr></thead>
                           <tbody><!-- Data will be populated by JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Profit & Performance Tab -->
            <div id="profit" class="tab-content">
                 <div class="profit-summary-grid">
                    <div class="stat-card"><h3>Total Profit (Today)</h3><p class="value" id="profit-today">₹0</p></div>
                    <div class="stat-card"><h3>Total Profit (This Month)</h3><p class="value" id="profit-month">₹0</p></div>
                    <div class="stat-card"><h3>Average Profit Margin</h3><p class="value" id="profit-avg-margin">0%</p></div>
                </div>
                <div class="profit-dashboard-grid">
                    <div class="card">
                        <h2>Monthly Profit Trends (Last 12 Months)</h2>
                        <canvas id="monthly-profit-chart"></canvas>
                    </div>
                    <div class="card">
                         <h2>Profit by Product Category</h2>
                         <div id="profit-by-category-chart-container">
                            <canvas id="profit-by-category-chart"></canvas>
                         </div>
                    </div>
                </div>
                 <div class="card">
                    <h2>Top Profitable Items</h2>
                    <div class="table-container">
                        <table class="styled-table" id="top-profitable-items-table">
                            <thead><tr><th>Item Sold</th><th>Total Profit</th><th>Profit Margin (%)</th></tr></thead>
                            <tbody><!-- Data will be populated by JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sales Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="analytics-dashboard-grid">
                    <div class="stat-card"><h3>Total Revenue</h3><p class="value" id="analytics-total-revenue">₹0</p></div>
                    <div class="stat-card"><h3>Total Profit</h3><p class="value" id="analytics-total-profit">₹0</p></div>
                    <div class="stat-card"><h3>Average Transaction Value</h3><p class="value" id="analytics-avg-transaction">₹0</p></div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2>Sales Performance</h2>
                        <div class="analytics-filters">
                            <div class="filter-group">
                                <select id="analytics-date-range">
                                    <option value="thisMonth">This Month</option>
                                    <option value="lastQuarter">Last Quarter</option>
                                    <option value="lastYear">Last Year</option>
                                </select>
                            </div>
                             <div class="filter-group">
                                <select id="analytics-category-filter">
                                    <option value="all">All Categories</option>
                                    <!-- Options populated by JS -->
                                </select>
                            </div>
                        </div>
                    </div>
                    <canvas id="sales-analytics-chart" height="120"></canvas>
                </div>
            </div>
            
            <!-- Credit Tab -->
            <div id="credit" class="tab-content">
                <div class="credit-summary-grid">
                    <div class="stat-card" id="total-outstanding-credit"><h3>Total Outstanding Credit</h3><p class="value">₹0</p></div>
                    <div class="stat-card" id="total-overdue-accounts"><h3>Total Overdue Accounts</h3><p class="value">0</p></div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h2>Credit Sales Overview</h2>
                        <div class="credit-filters">
                             <div class="payment-status-filter" id="credit-status-filter">
                                <button class="active" data-filter="all">All</button>
                                <button data-filter="paid">Paid</button>
                                <button data-filter="overdue">Overdue</button>
                            </div>
                            <input type="text" id="credit-customer-search" placeholder="Search by customer name..." style="max-width: 250px;">
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="styled-table" id="credit-overview-table">
                            <thead><tr><th>Customer Name</th><th>Item Sold</th><th>Original Amount (INR)</th><th>Outstanding Balance (INR)</th><th>Due Date</th><th>Payment Status</th></tr></thead>
                            <tbody><!-- Data will be populated by JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                 <div class="card">
                    <h2>System Settings</h2>
                    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                        <div>
                            <h3>Data Management</h3>
                            <div style="display:flex; gap: 15px; margin-top:15px;">
                                <button id="sync-drive-btn" class="btn btn-secondary">Sync with Google Drive</button>
                                <button id="import-data-btn" class="btn btn-secondary">Import Data</button>
                                <input type="file" id="excel-file" accept=".xlsx, .xls" style="display:none;">
                            </div>
                        </div>
                        <div>
                            <h3>General Settings</h3>
                             <div style="margin-top:15px;">
                                <label for="setting-shop-name">Shop Name</label>
                                <input type="text" id="setting-shop-name" value="Chic & Thread">
                            </div>
                             <div style="margin-top:15px;">
                                <label for="setting-currency">Currency</label>
                                <select id="setting-currency">
                                    <option value="INR">INR (₹)</option>
                                    <option value="USD">USD ($)</option>
                                </select>
                            </div>
                        </div>
                         <div>
                            <h3>User Profile</h3>
                             <div style="margin-top:15px; display:flex; flex-direction:column; gap:10px; align-items:flex-start;">
                                <button class="btn btn-secondary">Edit User Information</button>
                                <button class="btn btn-secondary">Change Password</button>
                             </div>
                        </div>
                    </div>
                     <div style="margin-top: 30px; border-top: 1px solid var(--border-primary); padding-top: 20px; text-align: right;">
                        <button class="btn btn-primary">Save Changes</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="toast"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <script>
    // NOTE: This script is a placeholder and does not contain the full business logic.
    // A full implementation would require extensive JavaScript to power all the UI elements,
    // data calculations, chart rendering, and interactions shown in the mockups.
    // The following is a simplified example to make the UI interactive.

    window.onload = () => {
        const { jsPDF } = window.jspdf;

        // --- Mock Data ---
        const mockInventory = [
            { id: 1, name: "Floral Dress", category: "Dress", stock: 15, cost: 800, price: 1500 },
            { id: 2, name: "Embroidered Kurti - Azure", category: "Kurti", stock: 25, cost: 700, price: 1200 },
            { id: 3, name: "Silk Saree - Blossom", category: "Sarees", stock: 10, cost: 2500, price: 4500 },
            { id: 4, name: "Maxi Dress - Floral", category: "Dress", stock: 8, cost: 950, price: 1800 },
            { id: 5, name: "Cotton Scarf", category: "Accessories", stock: 50, cost: 150, price: 400 },
            { id: 6, name: "Denim Jeans", category: "Lehengas", stock: 30, cost: 1000, price: 2000 } // Note: "Lehengas" is used to match chart
        ];

        const mockTransactions = [
            { id: 'T001', date: '2025-08-12', items: [{ name: 'Floral Dress', qty: 1, price: 1500 }], paymentMethod: 'Cash', total: 1500 },
            { id: 'T002', date: '2025-08-12', items: [{ name: 'Cotton Scarf', qty: 2, price: 400 }], paymentMethod: 'Credit', total: 800 },
            { id: 'T003', date: '2025-08-11', items: [{ name: 'Silk Saree - Blossom', qty: 1, price: 4500 }], paymentMethod: 'Credit', total: 4500 },
             { id: 'T004', date: '2025-08-11', items: [{ name: 'Embroidered Kurti - Azure', qty: 1, price: 1200 }], paymentMethod: 'Cash', total: 1200 },
        ];

        const mockCreditData = [
            { customer: 'Mill Colri', item: 'Silk Saree', original: 4250, outstanding: 500, dueDate: '2025-09-15', status: 'Due' },
            { customer: 'Item Sold', item: 'Floral Dress', original: 1500, outstanding: 1500, dueDate: '2025-08-10', status: 'Overdue' },
            { customer: 'Mill Polci', item: 'Embroidered Kurti', original: 1200, outstanding: 600, dueDate: '2025-08-30', status: 'Due' },
            { customer: 'Mill Folri', item: 'Denim Jeans', original: 2000, outstanding: 0, dueDate: '2025-08-01', status: 'Paid' }
        ]

        // --- Chart Instances ---
        let thBreakdownChart, monthlyProfitChart, profitByCategoryChart, salesAnalyticsChart;

        // --- UI Logic ---
        function setupUI() {
            // Tab Navigation
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelector('.tab-button.active').classList.remove('active');
                    button.classList.add('active');
                    document.querySelector('.tab-content.active').classList.remove('active');
                    document.getElementById(button.dataset.tab).classList.add('active');
                    // Re-render charts if they are in the active tab
                    renderChartsForActiveTab();
                });
            });

            // Sales Entry item search population
            const datalist = document.getElementById('inventory-datalist');
            mockInventory.forEach(item => {
                const option = document.createElement('option');
                option.value = `${item.name} (Stock: ${item.stock})`;
                datalist.appendChild(option);
            });
            
            // Initial render
            renderTransactionHistory(mockTransactions);
            renderProfitDashboard();
            renderCreditOverview(mockCreditData);
            renderChartsForActiveTab();
        }

        function renderChartsForActiveTab() {
            const activeTabId = document.querySelector('.tab-content.active').id;
            if (activeTabId === 'transactions') renderTransactionBreakdownChart();
            if (activeTabId === 'profit') {
                renderMonthlyProfitChart();
                renderProfitByCategoryChart();
            }
            if (activeTabId === 'analytics') renderSalesAnalyticsChart();
        }

        // --- Rendering Functions ---

        function renderTransactionHistory(data) {
            document.getElementById('th-total-transactions').textContent = data.filter(t => new Date(t.date).toDateString() === new Date().toDateString()).length;
            document.getElementById('th-total-revenue').textContent = '₹' + data.filter(t => new Date(t.date).toDateString() === new Date().toDateString()).reduce((sum, t) => sum + t.total, 0).toLocaleString('en-IN');

            const tbody = document.querySelector('#transaction-history-table tbody');
            tbody.innerHTML = data.map(tx => `
                <tr>
                    <td>${tx.id}</td>
                    <td>${new Date(tx.date).toLocaleDateString('en-GB')}</td>
                    <td>${tx.items.map(i => `${i.qty}x ${i.name}`).join(', ')}</td>
                    <td>${tx.paymentMethod}</td>
                    <td>₹${tx.total.toLocaleString('en-IN')}</td>
                </tr>
            `).join('');
        }
        
        function renderCreditOverview(data) {
            document.querySelector('#total-outstanding-credit .value').textContent = '₹' + data.reduce((sum, item) => sum + item.outstanding, 0).toLocaleString('en-IN');
            document.querySelector('#total-overdue-accounts .value').textContent = data.filter(item => item.status === 'Overdue').length;
            
            const tbody = document.querySelector('#credit-overview-table tbody');
            tbody.innerHTML = data.map(item => `
                <tr>
                    <td>${item.customer}</td>
                    <td>${item.item}</td>
                    <td>₹${item.original.toLocaleString('en-IN')}</td>
                    <td>₹${item.outstanding.toLocaleString('en-IN')}</td>
                    <td>${new Date(item.dueDate).toLocaleDateString('en-GB')}</td>
                    <td><span class="status-${item.status.toLowerCase()}">${item.status}</span></td>
                </tr>
            `).join('');
        }

        function renderProfitDashboard() {
            document.getElementById('profit-today').textContent = '₹1,250'; // Mock data
            document.getElementById('profit-month').textContent = '₹45,780'; // Mock data
            document.getElementById('profit-avg-margin').textContent = '38.5%'; // Mock data

            const tbody = document.querySelector('#top-profitable-items-table tbody');
            tbody.innerHTML = `
                <tr><td>Silk Saree - Blossom</td><td>₹5,800</td><td>45%</td></tr>
                <tr><td>Embroidered Kurti - Azure</td><td>₹4,200</td><td>40%</td></tr>
                <tr><td>Maxi Dress - Floral</td><td>₹3,950</td><td>38%</td></tr>
            `; // Mock data
        }

        // --- Chart Rendering ---

        function renderTransactionBreakdownChart() {
            const ctx = document.getElementById('transaction-breakdown-chart').getContext('2d');
            if (thBreakdownChart) thBreakdownChart.destroy();
            thBreakdownChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Cash', 'Credit'],
                    datasets: [{
                        data: [60, 40], // Mock data
                        backgroundColor: ['#198754', '#0D6EFD'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'right' } }
                }
            });
        }

        function renderMonthlyProfitChart() {
            const ctx = document.getElementById('monthly-profit-chart').getContext('2d');
            if(monthlyProfitChart) monthlyProfitChart.destroy();
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, 'rgba(214, 51, 132, 0.5)');
            gradient.addColorStop(1, 'rgba(214, 51, 132, 0)');
            monthlyProfitChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Profit',
                        data: [10, 25, 50, 100, 70, 80, 65, 90, 110, 100, 120, 130], // Mock data
                        borderColor: '#D63384',
                        backgroundColor: gradient,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        function renderProfitByCategoryChart() {
            const ctx = document.getElementById('profit-by-category-chart').getContext('2d');
            if(profitByCategoryChart) profitByCategoryChart.destroy();
            profitByCategoryChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Sarees', 'Kurti', 'Dress', 'Accessories', 'Lehengas'],
                    datasets: [{
                        data: [35, 25, 20, 15, 5], // Mock data
                        backgroundColor: ['#20c997', '#0dcaf0', '#d63384', '#ffc107', '#fd7e14'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    cutout: '70%',
                    plugins: { legend: { display: true, position: 'bottom' } }
                }
            });
        }
        
         function renderSalesAnalyticsChart() {
            const ctx = document.getElementById('sales-analytics-chart').getContext('2d');
            if(salesAnalyticsChart) salesAnalyticsChart.destroy();
            salesAnalyticsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['W1', 'W2', 'W3', 'W4', 'W5', 'W6', 'W7', 'W8'],
                    datasets: [{
                        label: 'Dresses',
                        data: [12, 19, 3, 5, 2, 3, 9, 5],
                        borderColor: '#D63384',
                        tension: 0.4
                    }, {
                        label: 'Kurtis',
                        data: [7, 11, 5, 8, 3, 7, 2, 10],
                        borderColor: '#0dcaf0',
                        tension: 0.4
                    }]
                },
                options: {
                     responsive: true,
                    maintainAspectRatio: false,
                }
            });
        }

        setupUI();
        
        // --- Google Auth Placeholder ---
        const authStatus = document.getElementById('auth-status');
        const signinBtn = document.getElementById('signin-btn');
        authStatus.textContent = 'API Ready. Please sign in.';
        signinBtn.disabled = false;
        
        signinBtn.addEventListener('click', () => {
             document.getElementById('login-screen').style.display = 'none';
             document.getElementById('app-container').classList.add('visible');
             document.getElementById('user-profile-container').style.display = 'flex';
             document.getElementById('user-name').textContent = 'Demo User';
             document.getElementById('user-pic').src = 'https://i.pravatar.cc/40'; // Placeholder image
             setupUI();
        });
    };
    </script>
</body>
</html>```
